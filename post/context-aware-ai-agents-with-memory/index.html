<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en-us"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=theme-color><title>Building Context-Aware AI Agents with Memory in AgenticGoKit &#183; Kunal Kushwaha</title><meta name=title content="Building Context-Aware AI Agents with Memory in AgenticGoKit &#183; Kunal Kushwaha"><meta name=description content="AI | Golang | Containers | Cloud | Tech"><meta name=keywords content="go,ai,context,agenticgokit,workflows,AIagents,memoryagents,"><link rel=canonical href=https://kunalkushwaha.github.io/post/context-aware-ai-agents-with-memory/><meta name=author content="Kunal Kushwaha's Blog"><link href=https://github.com/kunalkushwaha rel=me><link href=https://linkedin.com/in/kunalkushwaha rel=me><link href=https://twitter.com/kunalkushwaha rel=me><meta property="og:url" content="https://kunalkushwaha.github.io/post/context-aware-ai-agents-with-memory/"><meta property="og:site_name" content="Kunal Kushwaha"><meta property="og:title" content="Building Context-Aware AI Agents with Memory in AgenticGoKit"><meta property="og:description" content="AI | Golang | Containers | Cloud | Tech"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2025-10-30T02:18:55+09:00"><meta property="article:modified_time" content="2025-10-30T02:18:55+09:00"><meta property="article:tag" content="Go"><meta property="article:tag" content="Ai"><meta property="article:tag" content="Context"><meta property="article:tag" content="Agenticgokit"><meta property="article:tag" content="Workflows"><meta property="article:tag" content="AIagents"><meta name=twitter:card content="summary"><meta name=twitter:title content="Building Context-Aware AI Agents with Memory in AgenticGoKit"><meta name=twitter:description content="AI | Golang | Containers | Cloud | Tech"><link type=text/css rel=stylesheet href=https://kunalkushwaha.github.io/css/main.bundle.min.9a40ac2c977d0575e52e5def309449bca693aeb71d2c7d368f3b47fc0ddf4ad25ea3e2b086fb09e088747ef367344745a5b777c68b95c0cbb639b94758c3878b.css integrity="sha512-mkCsLJd9BXXlLl3vMJRJvKaTrrcdLH02jztH/A3fStJeo+KwhvsJ4Ih0fvNnNEdFpbd3xouVwMu2OblHWMOHiw=="><script type=text/javascript src=https://kunalkushwaha.github.io/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js integrity="sha512-b0EXSzoFtoCCD+CMrb+l+3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script><script type=text/javascript src=https://kunalkushwaha.github.io/js/zen-mode.min.9814dee9614d32aeb56239d118edfe20acd6231424f9b19c2dd48835038414130a5e946c0d1c9087d60e60e31840c9babfd217e3d4b95643dc8d651a71ccdf4a.js integrity="sha512-mBTe6WFNMq61YjnRGO3+IKzWIxQk+bGcLdSINQOEFBMKXpRsDRyQh9YOYOMYQMm6v9IX49S5VkPcjWUacczfSg=="></script><script src=https://kunalkushwaha.github.io/lib/zoom/zoom.min.umd.b4b722fcb5d42f34f52b30a92f3521b69f403ca9d96d0d6179eb537cb870f5d83fdf1fe836688d95d5c99fefbda4170487711006e56051fa67ea00da10521721.js integrity="sha512-tLci/LXULzT1KzCpLzUhtp9APKnZbQ1heetTfLhw9dg/3x/oNmiNldXJn++9pBcEh3EQBuVgUfpn6gDaEFIXIQ=="></script><script defer type=text/javascript id=script-bundle src=https://kunalkushwaha.github.io/js/main.bundle.min.f16cf48651044bc66625c8008eb5605cc702530530daa081ce7e495e50adf778bef6cd0747382983caf5e5cc745c819dd7a969e17e545119dff14346f4fcb977.js integrity="sha512-8Wz0hlEES8ZmJcgAjrVgXMcCUwUw2qCBzn5JXlCt93i+9s0HRzgpg8r15cx0XIGd16lp4X5UURnf8UNG9Py5dw==" data-copy=Copy data-copied=Copied></script><script src=https://kunalkushwaha.github.io/lib/jquery/jquery.slim.min.03cb160e3cfdb2667a2e2c80d283bebcf63ff8bbc4b629c9ab2babf6fae1d0c07ad470edae783efa4fabda2ac01c58d60e63b98b3c336be8208460f08f4354f5.js integrity="sha512-A8sWDjz9smZ6LiyA0oO+vPY/+LvEtinJqyur9vrh0MB61HDtrng++k+r2irAHFjWDmO5izwza+gghGDwj0NU9Q=="></script><script defer type=text/javascript src=https://kunalkushwaha.github.io/js/mermaid.bundle.112e3065655e306801b6043aa3add1349987138ddccd60e904642d0054401881d7f836760f1f01e9da795442754c9e762532eeb2ae842d5c7722a7f041633459.js integrity="sha512-ES4wZWVeMGgBtgQ6o63RNJmHE43czWDpBGQtAFRAGIHX+DZ2Dx8B6dp5VEJ1TJ52JTLusq6ELVx3IqfwQWM0WQ=="></script><link rel=apple-touch-icon sizes=180x180 href=https://kunalkushwaha.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://kunalkushwaha.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://kunalkushwaha.github.io/favicon-16x16.png><link rel=manifest href=https://kunalkushwaha.github.io/site.webmanifest><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Building Context-Aware AI Agents with Memory in AgenticGoKit","headline":"Building Context-Aware AI Agents with Memory in AgenticGoKit","inLanguage":"en-us","url":"https:\/\/kunalkushwaha.github.io\/post\/context-aware-ai-agents-with-memory\/","author":{"@type":"Person","name":"Kunal Kushwaha\u0027s Blog"},"copyrightYear":"2025","dateCreated":"2025-10-30T02:18:55\u002b09:00","datePublished":"2025-10-30T02:18:55\u002b09:00","dateModified":"2025-10-30T02:18:55\u002b09:00","keywords":["go","ai","context","agenticgokit","workflows","AIagents","memoryagents"],"mainEntityOfPage":"true","wordCount":"2703"}]</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-K16B935QET"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K16B935QET")</script></head><body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 min-h-[130px] opacity-65 bg-gradient-to-b from-neutral from-60% dark:from-neutral-800 to-transparent mix-blend-normal z-80"></div><div class="fixed inset-x-0 z-100"><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32"><div class="main-menu flex items-center justify-between py-6 md:justify-start gap-x-3 pt-[2px] pr-2 md:pr-4 pb-[3px] pl-0"><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=https://kunalkushwaha.github.io/ class="text-base font-medium">Kunal Kushwaha</a></nav><nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12"><a href=https://kunalkushwaha.github.io/post/ class="flex items-center hover:text-primary-600 dark:hover:text-primary-400" aria-label=Blog title=Posts><p class="text-base font-medium">Blog</p></a><a href=https://speakerdeck.com/kunalkushwaha target=_blank class="flex items-center hover:text-primary-600 dark:hover:text-primary-400" aria-label="Slide Deck" title><p class="text-base font-medium">Slide Deck</p></a><a href=https://kunalkushwaha.github.io/about/ class="flex items-center hover:text-primary-600 dark:hover:text-primary-400" aria-label=About title="About Me"><p class="text-base font-medium">About</p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400 me-1"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 md:hidden"><div id=menu-button class=block><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 pt-[5px]"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none text-end max-w-7xl"><li id=menu-close-button><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=https://kunalkushwaha.github.io/post/ class="flex items-center hover:text-primary-600 dark:hover:text-primary-400" aria-label=Blog title=Posts><p class="text-bg font-bg">Blog</p></a></li><li class=mt-1><a href=https://speakerdeck.com/kunalkushwaha target=_blank class="flex items-center hover:text-primary-600 dark:hover:text-primary-400" aria-label="Slide Deck" title><p class="text-bg font-bg">Slide Deck</p></a></li><li class=mt-1><a href=https://kunalkushwaha.github.io/about/ class="flex items-center hover:text-primary-600 dark:hover:text-primary-400" aria-label=About title="About Me"><p class="text-bg font-bg">About</p></a></li></ul></div></div></div></div></div></div><script type=text/javascript src=https://kunalkushwaha.github.io/js/background-blur.min.00a57c73ea12f2cab2980c3c3d649e89f6d82f190f74bbe2b67f2f5e39ab7d032ece47086400ca05396758aace13299da49aca43ea643d2625e62c506267a169.js integrity="sha512-AKV8c+oS8sqymAw8PWSeifbYLxkPdLvitn8vXjmrfQMuzkcIZADKBTlnWKrOEymdpJrKQ+pkPSYl5ixQYmehaQ==" data-blur-id=menu-blur></script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Building Context-Aware AI Agents with Memory in AgenticGoKit</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2025-10-30T02:18:55+09:00>30 October 2025</time><span class="px-2 text-primary-500">&#183;</span><span>2703 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">13 mins</span><span class="px-2 text-primary-500">&#183;</span><span class=mb-[2px]>
<span id=zen-mode-button class="text-lg hover:text-primary-500" title="Enable zen mode" data-title-i18n-disable="Enable zen mode" data-title-i18n-enable="Disable zen mode"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 50 50" width="50" height="50"><path fill="currentColor" d="M12.980469 4C9.1204688 4 5.9804688 7.14 5.9804688 11L6 26H9.9804688V11c0-1.65 1.3400002-3 3.0000002-3H40.019531c1.66.0 3 1.35 3 3V39c0 1.65-1.34 3-3 3H29c0 1.54-.579062 2.94-1.539062 4H40.019531c3.86.0 7-3.14 7-7V11c0-3.86-3.14-7-7-7H12.980469zM7 28c-2.206.0-4 1.794-4 4V42c0 2.206 1.794 4 4 4H23c2.206.0 4-1.794 4-4V32c0-2.206-1.794-4-4-4H7zm0 4H23L23.001953 42H7V32z"/></svg></span></span></span></span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=https://kunalkushwaha.github.io/tags/go/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Go
</span></span></a><a class="relative mt-[0.5rem] me-2" href=https://kunalkushwaha.github.io/tags/ai/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Ai
</span></span></a><a class="relative mt-[0.5rem] me-2" href=https://kunalkushwaha.github.io/tags/context/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Context
</span></span></a><a class="relative mt-[0.5rem] me-2" href=https://kunalkushwaha.github.io/tags/agenticgokit/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Agenticgokit
</span></span></a><a class="relative mt-[0.5rem] me-2" href=https://kunalkushwaha.github.io/tags/workflows/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Workflows
</span></span></a><a class="relative mt-[0.5rem] me-2" href=https://kunalkushwaha.github.io/tags/aiagents/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">AIagents
</span></span></a><a class="relative mt-[0.5rem] me-2" href=https://kunalkushwaha.github.io/tags/memoryagents/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Memoryagents</span></span></a></div></div><div class="flex author"><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Kunal Kushwaha&rsquo;s Blog</div><div class="text-sm text-neutral-700 dark:text-neutral-400">AI | Golang | Containers | Cloud | Tech</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/kunalkushwaha target=_blank aria-label=Github title=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://linkedin.com/in/kunalkushwaha target=_blank aria-label=Linkedin title=Linkedin rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://twitter.com/kunalkushwaha target=_blank aria-label=Twitter title=Twitter rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs"><div class="toc ps-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg -ms-5 ps-5 pe-2 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#the-memory-problem>The Memory Problem</a></li><li><a href=#the-agenticgokit-solution>The AgenticGoKit Solution</a></li><li><a href=#setting-up-memory-enabled-agent>Setting Up Memory-Enabled Agent</a><ul><li><a href=#1-configuration>1. Configuration</a></li><li><a href=#2-understanding-memory-configuration>2. Understanding Memory Configuration</a></li></ul></li><li><a href=#building-an-interactive-chat-loop>Building an Interactive Chat Loop</a><ul><li><a href=#basic-non-streaming-version>Basic (Non-Streaming) Version</a></li><li><a href=#streaming-version-real-time-token-by-token>Streaming Version (Real-time Token-by-Token)</a></li></ul></li><li><a href=#how-memory-works-under-the-hood>How Memory Works Under the Hood</a><ul><li><a href=#1-memory-query-phase-before-llm-call>1. <strong>Memory Query Phase</strong> (Before LLM call)</a></li><li><a href=#2-context-enrichment>2. <strong>Context Enrichment</strong></a></li><li><a href=#3-response-generation>3. <strong>Response Generation</strong></a></li><li><a href=#4-memory-storage>4. <strong>Memory Storage</strong></a></li><li><a href=#5-result-tracking>5. <strong>Result Tracking</strong></a></li></ul></li><li><a href=#real-world-example-output>Real-World Example Output</a></li><li><a href=#memory-query-counter-deep-dive>Memory Query Counter Deep Dive</a><ul><li><a href=#performance-monitoring>Performance Monitoring</a></li><li><a href=#understanding-memory-behavior>Understanding Memory Behavior</a></li><li><a href=#cost-tracking>Cost Tracking</a></li></ul></li><li><a href=#advanced-rag-vs-chat-history>Advanced: RAG vs. Chat History</a><ul><li><a href=#1-rag-retrieval-augmented-generation>1. <strong>RAG (Retrieval Augmented Generation)</strong></a></li><li><a href=#2-chat-history>2. <strong>Chat History</strong></a></li><li><a href=#why-both>Why Both?</a></li></ul></li><li><a href=#production-considerations>Production Considerations</a><ul><li><a href=#1-choose-the-right-provider>1. <strong>Choose the Right Provider</strong></a></li><li><a href=#2-session-management>2. <strong>Session Management</strong></a></li><li><a href=#3-token-budget-management>3. <strong>Token Budget Management</strong></a></li><li><a href=#4-error-handling>4. <strong>Error Handling</strong></a></li></ul></li><li><a href=#comparing-memory-vs-no-memory>Comparing: Memory vs. No Memory</a><ul><li><a href=#without-memory-code>Without Memory (Code)</a></li><li><a href=#with-memory-code>With Memory (Code)</a></li></ul></li><li><a href=#common-pitfalls--best-practices>Common Pitfalls & Best Practices</a><ul><li><a href=#privacy--data-security>Privacy & Data Security</a></li><li><a href=#token-cost-explosion>Token Cost Explosion</a></li><li><a href=#context-drift--hallucinations>Context Drift & Hallucinations</a></li><li><a href=#performance-degradation>Performance Degradation</a></li><li><a href=#over-reliance-on-memory>Over-Reliance on Memory</a></li></ul></li><li><a href=#complete-working-example>Complete Working Example</a></li><li><a href=#running-the-examples>Running the Examples</a><ul><li><a href=#1-basic-memory-demo>1. Basic Memory Demo</a></li><li><a href=#2-streaming-memory-demo>2. Streaming Memory Demo</a></li></ul></li><li><a href=#key-takeaways>Key Takeaways</a></li><li><a href=#next-steps>Next Steps</a></li><li><a href=#resources>Resources</a><ul><li><a href=#contribute-to-agenticgokit>Contribute to AgenticGoKit</a></li></ul></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#the-memory-problem>The Memory Problem</a></li><li><a href=#the-agenticgokit-solution>The AgenticGoKit Solution</a></li><li><a href=#setting-up-memory-enabled-agent>Setting Up Memory-Enabled Agent</a><ul><li><a href=#1-configuration>1. Configuration</a></li><li><a href=#2-understanding-memory-configuration>2. Understanding Memory Configuration</a></li></ul></li><li><a href=#building-an-interactive-chat-loop>Building an Interactive Chat Loop</a><ul><li><a href=#basic-non-streaming-version>Basic (Non-Streaming) Version</a></li><li><a href=#streaming-version-real-time-token-by-token>Streaming Version (Real-time Token-by-Token)</a></li></ul></li><li><a href=#how-memory-works-under-the-hood>How Memory Works Under the Hood</a><ul><li><a href=#1-memory-query-phase-before-llm-call>1. <strong>Memory Query Phase</strong> (Before LLM call)</a></li><li><a href=#2-context-enrichment>2. <strong>Context Enrichment</strong></a></li><li><a href=#3-response-generation>3. <strong>Response Generation</strong></a></li><li><a href=#4-memory-storage>4. <strong>Memory Storage</strong></a></li><li><a href=#5-result-tracking>5. <strong>Result Tracking</strong></a></li></ul></li><li><a href=#real-world-example-output>Real-World Example Output</a></li><li><a href=#memory-query-counter-deep-dive>Memory Query Counter Deep Dive</a><ul><li><a href=#performance-monitoring>Performance Monitoring</a></li><li><a href=#understanding-memory-behavior>Understanding Memory Behavior</a></li><li><a href=#cost-tracking>Cost Tracking</a></li></ul></li><li><a href=#advanced-rag-vs-chat-history>Advanced: RAG vs. Chat History</a><ul><li><a href=#1-rag-retrieval-augmented-generation>1. <strong>RAG (Retrieval Augmented Generation)</strong></a></li><li><a href=#2-chat-history>2. <strong>Chat History</strong></a></li><li><a href=#why-both>Why Both?</a></li></ul></li><li><a href=#production-considerations>Production Considerations</a><ul><li><a href=#1-choose-the-right-provider>1. <strong>Choose the Right Provider</strong></a></li><li><a href=#2-session-management>2. <strong>Session Management</strong></a></li><li><a href=#3-token-budget-management>3. <strong>Token Budget Management</strong></a></li><li><a href=#4-error-handling>4. <strong>Error Handling</strong></a></li></ul></li><li><a href=#comparing-memory-vs-no-memory>Comparing: Memory vs. No Memory</a><ul><li><a href=#without-memory-code>Without Memory (Code)</a></li><li><a href=#with-memory-code>With Memory (Code)</a></li></ul></li><li><a href=#common-pitfalls--best-practices>Common Pitfalls & Best Practices</a><ul><li><a href=#privacy--data-security>Privacy & Data Security</a></li><li><a href=#token-cost-explosion>Token Cost Explosion</a></li><li><a href=#context-drift--hallucinations>Context Drift & Hallucinations</a></li><li><a href=#performance-degradation>Performance Degradation</a></li><li><a href=#over-reliance-on-memory>Over-Reliance on Memory</a></li></ul></li><li><a href=#complete-working-example>Complete Working Example</a></li><li><a href=#running-the-examples>Running the Examples</a><ul><li><a href=#1-basic-memory-demo>1. Basic Memory Demo</a></li><li><a href=#2-streaming-memory-demo>2. Streaming Memory Demo</a></li></ul></li><li><a href=#key-takeaways>Key Takeaways</a></li><li><a href=#next-steps>Next Steps</a></li><li><a href=#resources>Resources</a><ul><li><a href=#contribute-to-agenticgokit>Contribute to AgenticGoKit</a></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><figure><img class="my-0 rounded-md" loading=lazy decoding=async fetchpriority=low alt="Simple streaming (terminal)" src=https://kunalkushwaha.github.io/memory-quote.PNG></figure><p>One of the biggest challenges in building AI agents is making them <strong>remember</strong>. Users expect conversational agents to recall previous interactions, maintain context across multiple turns, and provide personalized responses based on conversation history.</p><p>AgenticGoKit&rsquo;s memory system solves this elegantly with a unified interface that supports:</p><ul><li>Conversation history - Sequential chat memory</li><li>RAG (Retrieval Augmented Generation) - Semantic search over memories</li><li>Memory tracking - Monitor memory usage and query performance</li><li>Session management - Scope memories to conversation sessions</li></ul><p>In this post, we&rsquo;ll build a real interactive chat agent that demonstrates these features.</p><hr><p><em>Discover how to create conversational AI agents that remember past interactions and provide personalized, context-aware responses</em></p><hr><h2 class="relative group">The Memory Problem<div id=the-memory-problem class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#the-memory-problem aria-label=Anchor>#</a></span></h2><p>Consider a simple conversation:</p><pre tabindex=0><code>User: &#34;My name is Sarah and I love hiking.&#34;
Assistant: &#34;Nice to meet you, Sarah! Hiking is a wonderful activity.&#34;

User: &#34;What do you know about me?&#34;
Assistant: &#34;I don&#39;t have any information about you.&#34;
</code></pre><p>Without memory, each interaction is isolated. The agent forgets everything immediately.</p><h2 class="relative group">The AgenticGoKit Solution<div id=the-agenticgokit-solution class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#the-agenticgokit-solution aria-label=Anchor>#</a></span></h2><p>With AgenticGoKit&rsquo;s memory system, the same conversation becomes:</p><pre tabindex=0><code>User: &#34;My name is Sarah and I love hiking.&#34;
Assistant: &#34;Nice to meet you, Sarah! Hiking is a wonderful activity.&#34;
[Memory] 2 queries performed

User: &#34;What do you know about me?&#34;
Assistant: &#34;Based on our conversation, I know your name is Sarah and you enjoy hiking!&#34;
[Memory] 2 queries performed
</code></pre><p>The agent remembers! Let&rsquo;s see how to build this.</p><h2 class="relative group">Setting Up Memory-Enabled Agent<div id=setting-up-memory-enabled-agent class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#setting-up-memory-enabled-agent aria-label=Anchor>#</a></span></h2><h3 class="relative group">1. Configuration<div id=1-configuration class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#1-configuration aria-label=Anchor>#</a></span></h3><p>First, configure your agent with memory support:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>agent</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>vnext</span><span class=p>.</span><span class=nf>NewBuilder</span><span class=p>(</span><span class=s>&#34;chat-assistant&#34;</span><span class=p>).</span>
</span></span><span class=line><span class=cl>    <span class=nf>WithConfig</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>Config</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;chat-assistant&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>SystemPrompt</span><span class=p>:</span> <span class=s>`You are a helpful and friendly chat assistant.
</span></span></span><span class=line><span class=cl><span class=s>You remember details from our conversation and provide personalized responses.
</span></span></span><span class=line><span class=cl><span class=s>Be conversational and engaging while being helpful.`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// LLM Configuration</span>
</span></span><span class=line><span class=cl>        <span class=nx>LLM</span><span class=p>:</span> <span class=nx>vnext</span><span class=p>.</span><span class=nx>LLMConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>Provider</span><span class=p>:</span>    <span class=s>&#34;ollama&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>Model</span><span class=p>:</span>       <span class=s>&#34;gpt-oss:120b-cloud&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>Temperature</span><span class=p>:</span> <span class=mf>0.7</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>MaxTokens</span><span class=p>:</span>   <span class=mi>2000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// Memory Configuration</span>
</span></span><span class=line><span class=cl>        <span class=nx>Memory</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>MemoryConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>Provider</span><span class=p>:</span> <span class=s>&#34;memory&#34;</span><span class=p>,</span> <span class=c1>// In-memory provider</span>
</span></span><span class=line><span class=cl>            <span class=nx>RAG</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>RAGConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>MaxTokens</span><span class=p>:</span>       <span class=mi>1000</span><span class=p>,</span> <span class=c1>// Context window for memories</span>
</span></span><span class=line><span class=cl>                <span class=nx>PersonalWeight</span><span class=p>:</span>  <span class=mf>0.8</span><span class=p>,</span>  <span class=c1>// Prioritize conversation history</span>
</span></span><span class=line><span class=cl>                <span class=nx>KnowledgeWeight</span><span class=p>:</span> <span class=mf>0.2</span><span class=p>,</span>  <span class=c1>// Lower weight for knowledge base</span>
</span></span><span class=line><span class=cl>                <span class=nx>HistoryLimit</span><span class=p>:</span>    <span class=mi>20</span><span class=p>,</span>   <span class=c1>// Keep last 20 messages</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>Timeout</span><span class=p>:</span> <span class=mi>300</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}).</span>
</span></span><span class=line><span class=cl>    <span class=nf>Build</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>log</span><span class=p>.</span><span class=nf>Fatalf</span><span class=p>(</span><span class=s>&#34;Failed to create agent: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Initialize the agent</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Initialize</span><span class=p>(</span><span class=nx>ctx</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>log</span><span class=p>.</span><span class=nf>Fatalf</span><span class=p>(</span><span class=s>&#34;Failed to initialize agent: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>defer</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Cleanup</span><span class=p>(</span><span class=nx>ctx</span><span class=p>)</span>
</span></span></code></pre></div><h3 class="relative group">2. Understanding Memory Configuration<div id=2-understanding-memory-configuration class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#2-understanding-memory-configuration aria-label=Anchor>#</a></span></h3><p>Let&rsquo;s break down the key memory settings:</p><p><strong>Provider Options:</strong></p><ul><li><code>"memory"</code> - In-memory storage (simple, great for demos)</li><li><code>"pgvector"</code> - PostgreSQL with vector embeddings (production-ready)</li><li><code>"weaviate"</code> - Weaviate vector database</li><li>Custom providers via plugin system</li></ul><p><strong>RAG Configuration:</strong></p><ul><li><strong>MaxTokens</strong>: Maximum tokens for retrieved context (affects prompt size)</li><li><strong>PersonalWeight</strong>: Priority for conversation history (0.0-1.0)</li><li><strong>KnowledgeWeight</strong>: Priority for knowledge base documents (0.0-1.0)</li><li><strong>HistoryLimit</strong>: Number of recent messages to include</li></ul><p><strong>Pro Tip:</strong> For conversational agents, set <code>PersonalWeight</code> higher (0.7-0.9) to prioritize recent dialogue over general knowledge.</p><h2 class="relative group">Building an Interactive Chat Loop<div id=building-an-interactive-chat-loop class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#building-an-interactive-chat-loop aria-label=Anchor>#</a></span></h2><h3 class="relative group">Basic (Non-Streaming) Version<div id=basic-non-streaming-version class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#basic-non-streaming-version aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>scanner</span> <span class=o>:=</span> <span class=nx>bufio</span><span class=p>.</span><span class=nf>NewScanner</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdin</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>conversationCount</span> <span class=o>:=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Start chatting! Type &#39;quit&#39; or &#39;exit&#39; to end.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;You: &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>!</span><span class=nx>scanner</span><span class=p>.</span><span class=nf>Scan</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>userInput</span> <span class=o>:=</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>TrimSpace</span><span class=p>(</span><span class=nx>scanner</span><span class=p>.</span><span class=nf>Text</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>userInput</span> <span class=o>==</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>continue</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>ToLower</span><span class=p>(</span><span class=nx>userInput</span><span class=p>)</span> <span class=o>==</span> <span class=s>&#34;quit&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Goodbye!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>conversationCount</span><span class=o>++</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;\nAssistant (Turn %d):\n&#34;</span><span class=p>,</span> <span class=nx>conversationCount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Run agent with memory</span>
</span></span><span class=line><span class=cl>    <span class=nx>result</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>userInput</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Error: %v\n\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>continue</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Display response</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s\n&#34;</span><span class=p>,</span> <span class=nx>result</span><span class=p>.</span><span class=nx>Content</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Show memory usage</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>result</span><span class=p>.</span><span class=nx>MemoryUsed</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;\n[Memory] Used (%d queries)\n&#34;</span><span class=p>,</span> <span class=nx>result</span><span class=p>.</span><span class=nx>MemoryQueries</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;[Time] Response time: %v\n&#34;</span><span class=p>,</span> <span class=nx>result</span><span class=p>.</span><span class=nx>Duration</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>Repeat</span><span class=p>(</span><span class=s>&#34;-&#34;</span><span class=p>,</span> <span class=mi>60</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Streaming Version (Real-time Token-by-Token)<div id=streaming-version-real-time-token-by-token class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#streaming-version-real-time-token-by-token aria-label=Anchor>#</a></span></h3><p>For a more interactive experience, use streaming:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>stream</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>RunStream</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>userInput</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Error: %v\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>continue</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Process streaming chunks</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=nx>chunk</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>stream</span><span class=p>.</span><span class=nf>Chunks</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=nx>chunk</span><span class=p>.</span><span class=nx>Type</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nx>vnext</span><span class=p>.</span><span class=nx>ChunkTypeDelta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=nx>chunk</span><span class=p>.</span><span class=nx>Delta</span><span class=p>)</span> <span class=c1>// Print tokens as they arrive</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nx>vnext</span><span class=p>.</span><span class=nx>ChunkTypeError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;\nError: %v\n&#34;</span><span class=p>,</span> <span class=nx>chunk</span><span class=p>.</span><span class=nx>Error</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nx>vnext</span><span class=p>.</span><span class=nx>ChunkTypeDone</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>()</span> <span class=c1>// New line after response</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Get final result with memory stats</span>
</span></span><span class=line><span class=cl><span class=nx>result</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>stream</span><span class=p>.</span><span class=nf>Wait</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Error: %v\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>continue</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;\n[Memory] %d queries | [Time] %v\n&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=nx>result</span><span class=p>.</span><span class=nx>MemoryQueries</span><span class=p>,</span> <span class=nx>result</span><span class=p>.</span><span class=nx>Duration</span><span class=p>)</span>
</span></span></code></pre></div><h2 class="relative group">How Memory Works Under the Hood<div id=how-memory-works-under-the-hood class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#how-memory-works-under-the-hood aria-label=Anchor>#</a></span></h2><p>When you send a message to a memory-enabled agent, here&rsquo;s what happens:</p><pre class="not-prose mermaid">graph TD
    A[User Input] --> B[Memory Query Phase]
    B --> C{RAG Query}
    B --> D{Chat History}
    C --> E[Semantic Search]
    D --> F[Sequential Retrieval]
    E --> G[Relevant Memories]
    F --> H[Recent Messages]
    G --> I[Context Enrichment]
    H --> I
    I --> J[Enriched Prompt]
    J --> K[LLM Generation]
    K --> L[Response]
    L --> M[Memory Storage]
    M --> N[Update RAG Index]
    M --> O[Update Chat History]</pre><h3 class="relative group">1. <strong>Memory Query Phase</strong> (Before LLM call)<div id=1-memory-query-phase-before-llm-call class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#1-memory-query-phase-before-llm-call aria-label=Anchor>#</a></span></h3><pre tabindex=0><code>Input: &#34;What did we discuss earlier?&#34;

Memory System performs:
 RAG Query: Semantic search for relevant past memories
   Returns: Top-k similar conversation snippets

 History Fetch: Get recent sequential messages
    Returns: Last N conversation turns
</code></pre><p>Typically <strong>2 queries per turn</strong>:</p><ol><li>One RAG semantic query</li><li>One chat history retrieval</li></ol><h3 class="relative group">2. <strong>Context Enrichment</strong><div id=2-context-enrichment class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#2-context-enrichment aria-label=Anchor>#</a></span></h3><p>The agent uses specialized APIs to combine context into an enriched prompt:</p><p><strong>Key APIs Used:</strong></p><ul><li><code>EnrichWithMemory()</code> - Performs RAG semantic search and returns relevant memories</li><li><code>BuildChatHistoryContext()</code> - Retrieves recent conversation history</li><li><code>BuildEnrichedPrompt()</code> - Combines all context (system prompt, memories, history, user input)</li></ul><p><strong>How it works in <code>agent.Run()</code>:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Step 2: Enhance prompt with memory context if memory is enabled</span>
</span></span><span class=line><span class=cl><span class=c1>// Use the new BuildEnrichedPrompt utility for proper RAG integration</span>
</span></span><span class=line><span class=cl><span class=nx>memoryQueries</span> <span class=o>:=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>a</span><span class=p>.</span><span class=nx>memoryProvider</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=o>&amp;&amp;</span> <span class=nx>a</span><span class=p>.</span><span class=nx>config</span><span class=p>.</span><span class=nx>Memory</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Convert llm.Prompt to core.Prompt for enrichment</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>corePrompt</span> <span class=nx>core</span><span class=p>.</span><span class=nx>Prompt</span>
</span></span><span class=line><span class=cl>    <span class=nx>corePrompt</span><span class=p>,</span> <span class=nx>memoryQueries</span> <span class=p>=</span> <span class=nf>BuildEnrichedPrompt</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>prompt</span><span class=p>.</span><span class=nx>System</span><span class=p>,</span> <span class=nx>prompt</span><span class=p>.</span><span class=nx>User</span><span class=p>,</span> <span class=nx>a</span><span class=p>.</span><span class=nx>memoryProvider</span><span class=p>,</span> <span class=nx>a</span><span class=p>.</span><span class=nx>config</span><span class=p>.</span><span class=nx>Memory</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Update the LLM prompt with enriched content</span>
</span></span><span class=line><span class=cl>    <span class=nx>prompt</span><span class=p>.</span><span class=nx>System</span> <span class=p>=</span> <span class=nx>corePrompt</span><span class=p>.</span><span class=nx>System</span>
</span></span><span class=line><span class=cl>    <span class=nx>prompt</span><span class=p>.</span><span class=nx>User</span> <span class=p>=</span> <span class=nx>corePrompt</span><span class=p>.</span><span class=nx>User</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The <code>BuildEnrichedPrompt</code> function internally:</p><ol><li>Calls <code>EnrichWithMemory()</code> to get RAG context (counts as 1 query)</li><li>Calls <code>BuildChatHistoryContext()</code> to get chat history (counts as 1 query if performed)</li><li>Combines everything into the final enriched prompt</li></ol><p>The agent combines:</p><ul><li>Your system prompt</li><li>Retrieved memories (RAG results from <code>EnrichWithMemory</code>)</li><li>Recent chat history (from <code>BuildChatHistoryContext</code>)</li><li>Current user input</li></ul><p>Into an enriched prompt sent to the LLM via <code>BuildEnrichedPrompt</code>.</p><h3 class="relative group">3. <strong>Response Generation</strong><div id=3-response-generation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#3-response-generation aria-label=Anchor>#</a></span></h3><p>The LLM generates a response using the enriched context.</p><h3 class="relative group">4. <strong>Memory Storage</strong><div id=4-memory-storage class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#4-memory-storage aria-label=Anchor>#</a></span></h3><p>After response generation:</p><ul><li>User message is stored in memory</li><li>Assistant response is stored in memory</li><li>Both are available for future retrievals</li></ul><h3 class="relative group">5. <strong>Result Tracking</strong><div id=5-result-tracking class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#5-result-tracking aria-label=Anchor>#</a></span></h3><p>The <code>Result</code> object reports:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>result</span><span class=p>.</span><span class=nx>MemoryUsed</span>      <span class=c1>// true if memory was accessed</span>
</span></span><span class=line><span class=cl><span class=nx>result</span><span class=p>.</span><span class=nx>MemoryQueries</span>   <span class=c1>// Number of queries performed</span>
</span></span><span class=line><span class=cl><span class=nx>result</span><span class=p>.</span><span class=nx>Duration</span>        <span class=c1>// Total execution time</span>
</span></span><span class=line><span class=cl><span class=nx>result</span><span class=p>.</span><span class=nx>TokensUsed</span>      <span class=c1>// LLM tokens consumed</span>
</span></span></code></pre></div><h2 class="relative group">Real-World Example Output<div id=real-world-example-output class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#real-world-example-output aria-label=Anchor>#</a></span></h2><p>Here&rsquo;s what a real conversation looks like:</p><pre tabindex=0><code>Interactive Chat Agent with Memory
===================================

You: My name is Sarah and I work as a software engineer in San Francisco.

Assistant (Turn 1):
Nice to meet you, Sarah! It&#39;s great to connect with a software engineer from 
San Francisco. The tech scene there is incredible! What kind of projects do 
you work on?

[Memory] Used (2 queries)
[Time] Response time: 3.2s


You: I mostly work on distributed systems and cloud infrastructure.

Assistant (Turn 2):
That sounds fascinating! Distributed systems and cloud infrastructure are 
critical areas in modern software engineering. Working on those systems in 
San Francisco must give you exposure to some cutting-edge technology. Are 
you working with any particular cloud providers or frameworks?

[Memory] Used (2 queries)
[Time] Response time: 3.5s


You: What do you know about me so far?

Assistant (Turn 3):
Based on our conversation, I know that:
- Your name is Sarah
- You work as a software engineer in San Francisco
- You focus on distributed systems and cloud infrastructure

These are really impressive areas of expertise! Is there anything specific 
about your work you&#39;d like to discuss?

[Memory] Used (2 queries)
[Time] Response time: 3.1s

</code></pre><p>Notice how the agent:</p><ol><li>Remembers the name &ldquo;Sarah&rdquo;</li><li>Recalls the job (software engineer in San Francisco)</li><li>References the technical specialization (distributed systems)</li><li>Maintains conversational context across turns</li></ol><h2 class="relative group">Memory Query Counter Deep Dive<div id=memory-query-counter-deep-dive class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#memory-query-counter-deep-dive aria-label=Anchor>#</a></span></h2><p>The memory query counter is particularly useful for:</p><h3 class="relative group">Performance Monitoring<div id=performance-monitoring class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#performance-monitoring aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=k>if</span> <span class=nx>result</span><span class=p>.</span><span class=nx>MemoryQueries</span> <span class=p>&gt;</span> <span class=mi>5</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>log</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Warning: High memory query count: %d&#34;</span><span class=p>,</span> <span class=nx>result</span><span class=p>.</span><span class=nx>MemoryQueries</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Understanding Memory Behavior<div id=understanding-memory-behavior class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#understanding-memory-behavior aria-label=Anchor>#</a></span></h3><p>Typical query counts:</p><ul><li>0 queries: Memory disabled or no memory configured</li><li>1 query: Only RAG or only history (unusual)</li><li>2 queries: Normal (1 RAG + 1 history fetch)</li><li>3+ queries: Multiple memory providers or custom implementations</li></ul><h3 class="relative group">Cost Tracking<div id=cost-tracking class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#cost-tracking aria-label=Anchor>#</a></span></h3><p>For production systems using vector databases:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>ConversationMetrics</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>TotalTurns</span>       <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>TotalMemQueries</span>  <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>AvgQueriesPerTurn</span> <span class=kt>float64</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>metrics</span><span class=p>.</span><span class=nx>TotalMemQueries</span> <span class=o>+=</span> <span class=nx>result</span><span class=p>.</span><span class=nx>MemoryQueries</span>
</span></span><span class=line><span class=cl><span class=nx>metrics</span><span class=p>.</span><span class=nx>AvgQueriesPerTurn</span> <span class=p>=</span> <span class=nb>float64</span><span class=p>(</span><span class=nx>metrics</span><span class=p>.</span><span class=nx>TotalMemQueries</span><span class=p>)</span> <span class=o>/</span> <span class=nb>float64</span><span class=p>(</span><span class=nx>metrics</span><span class=p>.</span><span class=nx>TotalTurns</span><span class=p>)</span>
</span></span></code></pre></div><h2 class="relative group">Advanced: RAG vs. Chat History<div id=advanced-rag-vs-chat-history class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#advanced-rag-vs-chat-history aria-label=Anchor>#</a></span></h2><p>AgenticGoKit&rsquo;s memory system uses <strong>two complementary retrieval mechanisms</strong>:</p><h3 class="relative group">1. <strong>RAG (Retrieval Augmented Generation)</strong><div id=1-rag-retrieval-augmented-generation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#1-rag-retrieval-augmented-generation aria-label=Anchor>#</a></span></h3><p><strong>How it works:</strong></p><ul><li>Converts text to embeddings</li><li>Performs semantic similarity search</li><li>Finds conceptually related memories</li></ul><p><strong>Best for:</strong></p><ul><li>Finding relevant facts from many turns ago</li><li>Semantic understanding (&ldquo;what hobbies&rdquo; finds &ldquo;I like hiking&rdquo;)</li><li>Knowledge base queries</li></ul><p><strong>Example:</strong></p><pre tabindex=0><code>Turn 1: &#34;I love hiking in the mountains&#34;
Turn 20: &#34;What outdoor activities do I enjoy?&#34;
          RAG retrieves Turn 1 (semantically similar)
</code></pre><h3 class="relative group">2. <strong>Chat History</strong><div id=2-chat-history class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#2-chat-history aria-label=Anchor>#</a></span></h3><p><strong>How it works:</strong></p><ul><li>Sequential retrieval</li><li>Returns last N conversation turns</li><li>Maintains dialogue flow</li></ul><p><strong>Best for:</strong></p><ul><li>Recent context</li><li>Conversation continuity</li><li>Referencing &ldquo;earlier&rdquo; or &ldquo;just now&rdquo;</li></ul><p><strong>Example:</strong></p><pre tabindex=0><code>Turn 18: &#34;I work in San Francisco&#34;
Turn 19: &#34;What city did I mention?&#34;
          Chat history provides Turn 18
</code></pre><h3 class="relative group">Why Both?<div id=why-both class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#why-both aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>Memory</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>MemoryConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>RAG</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>RAGConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>PersonalWeight</span><span class=p>:</span>  <span class=mf>0.8</span><span class=p>,</span>  <span class=c1>// Chat history priority</span>
</span></span><span class=line><span class=cl>        <span class=nx>KnowledgeWeight</span><span class=p>:</span> <span class=mf>0.2</span><span class=p>,</span>  <span class=c1>// RAG semantic search priority</span>
</span></span><span class=line><span class=cl>        <span class=nx>HistoryLimit</span><span class=p>:</span>    <span class=mi>20</span><span class=p>,</span>   <span class=c1>// Last 20 messages</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The weights balance:</p><ul><li><strong>High PersonalWeight</strong>: Prioritizes recent dialogue context, ensuring conversational continuity and immediate relevance</li><li><strong>High KnowledgeWeight</strong>: Prioritizes semantic relevance over recency, better for knowledge-intensive tasks</li></ul><p><strong>Why prioritize chat history for conversations?</strong> Recent dialogue provides immediate context, maintains conversation flow, and ensures the agent remembers what was just discussed. This creates more natural, coherent interactions compared to jumping between semantically similar but temporally distant memories.</p><h2 class="relative group">Production Considerations<div id=production-considerations class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#production-considerations aria-label=Anchor>#</a></span></h2><h3 class="relative group">1. <strong>Choose the Right Provider</strong><div id=1-choose-the-right-provider class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#1-choose-the-right-provider aria-label=Anchor>#</a></span></h3><p><strong>Development/Testing:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>Memory</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>MemoryConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Provider</span><span class=p>:</span> <span class=s>&#34;memory&#34;</span><span class=p>,</span> <span class=c1>// In-memory, lost on restart</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Production:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>Memory</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>MemoryConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Provider</span><span class=p>:</span> <span class=s>&#34;pgvector&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>ConnectionString</span><span class=p>:</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Getenv</span><span class=p>(</span><span class=s>&#34;DATABASE_URL&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=nx>Embedding</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>EmbeddingConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Provider</span><span class=p>:</span> <span class=s>&#34;ollama&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>Model</span><span class=p>:</span>    <span class=s>&#34;nomic-embed-text:latest&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">2. <strong>Session Management</strong><div id=2-session-management class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#2-session-management aria-label=Anchor>#</a></span></h3><p>Scope memories to user sessions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>sessionID</span> <span class=o>:=</span> <span class=nx>memory</span><span class=p>.</span><span class=nf>NewSession</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>ctx</span> <span class=p>=</span> <span class=nx>memory</span><span class=p>.</span><span class=nf>SetSession</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>sessionID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// All subsequent operations use this session</span>
</span></span><span class=line><span class=cl><span class=nx>result</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=s>&#34;Hello&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h3 class="relative group">3. <strong>Token Budget Management</strong><div id=3-token-budget-management class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#3-token-budget-management aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>RAG</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>RAGConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>MaxTokens</span><span class=p>:</span> <span class=mi>1000</span><span class=p>,</span> <span class=c1>// Limit context size</span>
</span></span><span class=line><span class=cl>    <span class=nx>HistoryLimit</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span> <span class=c1>// Fewer turns = lower costs</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Why this matters:</strong></p><ul><li>LLM APIs charge per token</li><li>Larger context = higher costs per request</li><li>Balance context quality vs. cost</li></ul><h3 class="relative group">4. <strong>Error Handling</strong><div id=4-error-handling class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#4-error-handling aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>result</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>input</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>log</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Agent error: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>continue</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>!</span><span class=nx>result</span><span class=p>.</span><span class=nx>MemoryUsed</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>log</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Warning: Memory was not utilized&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>result</span><span class=p>.</span><span class=nx>MemoryQueries</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>log</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Warning: No memory queries performed&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 class="relative group">Comparing: Memory vs. No Memory<div id=comparing-memory-vs-no-memory class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#comparing-memory-vs-no-memory aria-label=Anchor>#</a></span></h2><p>Let&rsquo;s see the difference side-by-side:</p><table><thead><tr><th>Aspect</th><th>Without Memory</th><th>With Memory</th></tr></thead><tbody><tr><td><strong>Turn 1:</strong> &ldquo;My name is Alex&rdquo;</td><td>&ldquo;Nice to meet you, Alex!&rdquo;</td><td>&ldquo;Nice to meet you, Alex!"<br><em>[Memory] 2 queries</em></td></tr><tr><td><strong>Turn 2:</strong> &ldquo;What&rsquo;s my name?&rdquo;</td><td>&ldquo;I don&rsquo;t know your name.&rdquo;</td><td>&ldquo;Your name is Alex!"<br><em>[Memory] 2 queries</em></td></tr><tr><td><strong>Turn 3:</strong> &ldquo;What do I do?&rdquo;</td><td>&ldquo;I don&rsquo;t have information about your profession.&rdquo;</td><td>&ldquo;I don&rsquo;t recall you mentioning your profession yet. What do you do?"<br><em>[Memory] 2 queries</em></td></tr><tr><td><strong>Turn 4:</strong> &ldquo;I&rsquo;m a teacher&rdquo;</td><td>&ldquo;That&rsquo;s interesting!&rdquo;</td><td>&ldquo;That&rsquo;s wonderful! As a teacher, you must have many interesting stories to share."<br><em>[Memory] 2 queries</em></td></tr><tr><td><strong>Turn 5:</strong> &ldquo;Tell me about myself&rdquo;</td><td>&ldquo;I don&rsquo;t have personal information about you.&rdquo;</td><td>&ldquo;Based on our conversation, I know you&rsquo;re Alex and you work as a teacher. You seem passionate about education!"<br><em>[Memory] 2 queries</em></td></tr></tbody></table><h3 class="relative group">Without Memory (Code)<div id=without-memory-code class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#without-memory-code aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>agent</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>vnext</span><span class=p>.</span><span class=nf>QuickChatAgent</span><span class=p>(</span><span class=s>&#34;gpt-4o-mini&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>// No memory configuration</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>result1</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=s>&#34;My name is Alex&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>result2</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=s>&#34;What&#39;s my name?&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>// Response: &#34;I don&#39;t know your name&#34;</span>
</span></span></code></pre></div><h3 class="relative group">With Memory (Code)<div id=with-memory-code class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#with-memory-code aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>agent</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>vnext</span><span class=p>.</span><span class=nf>NewBuilder</span><span class=p>(</span><span class=s>&#34;agent&#34;</span><span class=p>).</span>
</span></span><span class=line><span class=cl>    <span class=nf>WithConfig</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>Config</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>LLM</span><span class=p>:</span> <span class=nx>vnext</span><span class=p>.</span><span class=nx>LLMConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>Provider</span><span class=p>:</span> <span class=s>&#34;ollama&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>Model</span><span class=p>:</span> <span class=s>&#34;gpt-oss:120b-cloud&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nx>Memory</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>MemoryConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>Provider</span><span class=p>:</span> <span class=s>&#34;memory&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>RAG</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>RAGConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>PersonalWeight</span><span class=p>:</span> <span class=mf>0.8</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>HistoryLimit</span><span class=p>:</span> <span class=mi>20</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}).</span>
</span></span><span class=line><span class=cl>    <span class=nf>Build</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>result1</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=s>&#34;My name is Alex&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>// [Memory] 2 queries</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>result2</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=s>&#34;What&#39;s my name?&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>// Response: &#34;Your name is Alex!&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>// [Memory] 2 queries</span>
</span></span></code></pre></div><h2 class="relative group">Common Pitfalls & Best Practices<div id=common-pitfalls--best-practices class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#common-pitfalls--best-practices aria-label=Anchor>#</a></span></h2><h3 class="relative group">Privacy & Data Security<div id=privacy--data-security class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#privacy--data-security aria-label=Anchor>#</a></span></h3><p><strong>Pitfall:</strong> Storing sensitive information in memory without user consent.</p><p><strong>Best Practice:</strong> Always implement data retention policies and give users control over their data:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Clear user session data</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>memoryProvider</span><span class=p>.</span><span class=nf>ClearSession</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>sessionID</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>log</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Failed to clear session: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Implement data retention limits</span>
</span></span><span class=line><span class=cl><span class=nx>Memory</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>MemoryConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>RetentionPolicy</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>RetentionPolicy</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>MaxAge</span><span class=p>:</span>     <span class=mi>30</span> <span class=o>*</span> <span class=mi>24</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Hour</span><span class=p>,</span> <span class=c1>// 30 days</span>
</span></span><span class=line><span class=cl>        <span class=nx>MaxEntries</span><span class=p>:</span> <span class=mi>1000</span><span class=p>,</span>                <span class=c1>// Per session</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Token Cost Explosion<div id=token-cost-explosion class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#token-cost-explosion aria-label=Anchor>#</a></span></h3><p><strong>Pitfall:</strong> Memory context grows unbounded, causing skyrocketing API costs.</p><p><strong>Best Practice:</strong> Set reasonable limits and monitor usage:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>RAG</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>RAGConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>MaxTokens</span><span class=p>:</span>    <span class=mi>1000</span><span class=p>,</span> <span class=c1>// Limit context size</span>
</span></span><span class=line><span class=cl>    <span class=nx>HistoryLimit</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>   <span class=c1>// Limit conversation turns</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Monitor costs</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>result</span><span class=p>.</span><span class=nx>MemoryQueries</span> <span class=p>&gt;</span> <span class=mi>5</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>log</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;High memory usage detected: %d queries&#34;</span><span class=p>,</span> <span class=nx>result</span><span class=p>.</span><span class=nx>MemoryQueries</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Context Drift & Hallucinations<div id=context-drift--hallucinations class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#context-drift--hallucinations aria-label=Anchor>#</a></span></h3><p><strong>Pitfall:</strong> Outdated or irrelevant memories confuse the agent.</p><p><strong>Best Practice:</strong> Use session management and implement relevance scoring:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Start new conversation sessions</span>
</span></span><span class=line><span class=cl><span class=nx>sessionID</span> <span class=o>:=</span> <span class=nx>memory</span><span class=p>.</span><span class=nf>NewSession</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>ctx</span> <span class=p>=</span> <span class=nx>memory</span><span class=p>.</span><span class=nf>SetSession</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>sessionID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// AgenticGoKit automatically handles session isolation</span>
</span></span><span class=line><span class=cl><span class=nx>result</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=s>&#34;Hello, I&#39;m starting a new conversation&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h3 class="relative group">Performance Degradation<div id=performance-degradation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#performance-degradation aria-label=Anchor>#</a></span></h3><p><strong>Pitfall:</strong> Memory queries slow down response times.</p><p><strong>Best Practice:</strong> Choose appropriate providers and optimize configurations:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Development: Fast in-memory</span>
</span></span><span class=line><span class=cl><span class=nx>Memory</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>MemoryConfig</span><span class=p>{</span><span class=nx>Provider</span><span class=p>:</span> <span class=s>&#34;memory&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Production: Optimized vector database</span>
</span></span><span class=line><span class=cl><span class=nx>Memory</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>MemoryConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Provider</span><span class=p>:</span> <span class=s>&#34;pgvector&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>Embedding</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>EmbeddingConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Provider</span><span class=p>:</span> <span class=s>&#34;ollama&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>Model</span><span class=p>:</span>    <span class=s>&#34;nomic-embed-text:latest&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 class="relative group">Over-Reliance on Memory<div id=over-reliance-on-memory class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#over-reliance-on-memory aria-label=Anchor>#</a></span></h3><p><strong>Pitfall:</strong> Agent becomes too dependent on past context, ignoring current instructions.</p><p><strong>Best Practice:</strong> Balance memory weight with current context importance:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>RAG</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>RAGConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>PersonalWeight</span><span class=p>:</span>  <span class=mf>0.7</span><span class=p>,</span>  <span class=c1>// Memory context</span>
</span></span><span class=line><span class=cl>    <span class=nx>KnowledgeWeight</span><span class=p>:</span> <span class=mf>0.3</span><span class=p>,</span>  <span class=c1>// Current/general knowledge</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 class="relative group">Complete Working Example<div id=complete-working-example class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#complete-working-example aria-label=Anchor>#</a></span></h2><p>Here&rsquo;s the full code for a production-ready memory-enabled chat agent:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;bufio&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;strings&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;github.com/kunalkushwaha/agenticgokit/core/vnext&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>_</span> <span class=s>&#34;github.com/kunalkushwaha/agenticgokit/plugins/llm/ollama&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>_</span> <span class=s>&#34;github.com/kunalkushwaha/agenticgokit/plugins/memory/memory&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ctx</span> <span class=o>:=</span> <span class=nx>context</span><span class=p>.</span><span class=nf>Background</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Create agent with memory</span>
</span></span><span class=line><span class=cl>    <span class=nx>agent</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>vnext</span><span class=p>.</span><span class=nf>NewBuilder</span><span class=p>(</span><span class=s>&#34;chat-assistant&#34;</span><span class=p>).</span>
</span></span><span class=line><span class=cl>        <span class=nf>WithConfig</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>Config</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;chat-assistant&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>SystemPrompt</span><span class=p>:</span> <span class=s>`You are a helpful and friendly chat assistant.
</span></span></span><span class=line><span class=cl><span class=s>You remember details from our conversation and provide personalized responses.`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>LLM</span><span class=p>:</span> <span class=nx>vnext</span><span class=p>.</span><span class=nx>LLMConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>Provider</span><span class=p>:</span>    <span class=s>&#34;ollama&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>Model</span><span class=p>:</span>       <span class=s>&#34;gpt-oss:120b-cloud&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>Temperature</span><span class=p>:</span> <span class=mf>0.7</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>MaxTokens</span><span class=p>:</span>   <span class=mi>2000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nx>Memory</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>MemoryConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>Provider</span><span class=p>:</span> <span class=s>&#34;memory&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>RAG</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>vnext</span><span class=p>.</span><span class=nx>RAGConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>MaxTokens</span><span class=p>:</span>       <span class=mi>1000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>PersonalWeight</span><span class=p>:</span>  <span class=mf>0.8</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>KnowledgeWeight</span><span class=p>:</span> <span class=mf>0.2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>HistoryLimit</span><span class=p>:</span>    <span class=mi>20</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nx>Timeout</span><span class=p>:</span> <span class=mi>300</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>}).</span>
</span></span><span class=line><span class=cl>        <span class=nf>Build</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatalf</span><span class=p>(</span><span class=s>&#34;Failed to create agent: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Initialize</span><span class=p>(</span><span class=nx>ctx</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatalf</span><span class=p>(</span><span class=s>&#34;Failed to initialize agent: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Cleanup</span><span class=p>(</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Chat Agent Ready!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Try: &#39;My name is [name]&#39; then ask &#39;What do you know about me?&#39;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>scanner</span> <span class=o>:=</span> <span class=nx>bufio</span><span class=p>.</span><span class=nf>NewScanner</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdin</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>conversationCount</span> <span class=o>:=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;You: &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>!</span><span class=nx>scanner</span><span class=p>.</span><span class=nf>Scan</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>userInput</span> <span class=o>:=</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>TrimSpace</span><span class=p>(</span><span class=nx>scanner</span><span class=p>.</span><span class=nf>Text</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>userInput</span> <span class=o>==</span> <span class=s>&#34;&#34;</span> <span class=o>||</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>ToLower</span><span class=p>(</span><span class=nx>userInput</span><span class=p>)</span> <span class=o>==</span> <span class=s>&#34;quit&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>conversationCount</span><span class=o>++</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;\nAssistant (Turn %d):\n&#34;</span><span class=p>,</span> <span class=nx>conversationCount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>result</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>agent</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>userInput</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Error: %v\n\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s\n&#34;</span><span class=p>,</span> <span class=nx>result</span><span class=p>.</span><span class=nx>Content</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>result</span><span class=p>.</span><span class=nx>MemoryUsed</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;\n[Memory] %d queries | [Time] %v\n&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=nx>result</span><span class=p>.</span><span class=nx>MemoryQueries</span><span class=p>,</span> <span class=nx>result</span><span class=p>.</span><span class=nx>Duration</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>Repeat</span><span class=p>(</span><span class=s>&#34;-&#34;</span><span class=p>,</span> <span class=mi>60</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;\nThanks for chatting!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 class="relative group">Running the Examples<div id=running-the-examples class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#running-the-examples aria-label=Anchor>#</a></span></h2><p>AgenticGoKit includes two complete demos:</p><h3 class="relative group">1. Basic Memory Demo<div id=1-basic-memory-demo class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#1-basic-memory-demo aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> examples/vnext/conversation-memory-demo
</span></span><span class=line><span class=cl>go run main.go
</span></span></code></pre></div><p>Features:</p><ul><li>Standard request/response flow</li><li>Memory tracking and statistics</li><li>Simple to understand and modify</li></ul><h3 class="relative group">2. Streaming Memory Demo<div id=2-streaming-memory-demo class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#2-streaming-memory-demo aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> examples/vnext/conversation-memory-stream-demo
</span></span><span class=line><span class=cl>go run main.go
</span></span></code></pre></div><p>Features:</p><ul><li>Real-time token-by-token streaming</li><li>Live memory query feedback</li><li>Enhanced user experience</li></ul><h2 class="relative group">Key Takeaways<div id=key-takeaways class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#key-takeaways aria-label=Anchor>#</a></span></h2><ol><li><p><strong>Memory makes agents conversational</strong> - Context awareness transforms isolated Q&amp;A into natural dialogue</p></li><li><p><strong>Two-tier retrieval is powerful</strong> - RAG + chat history provides both semantic understanding and conversational flow</p></li><li><p><strong>Memory queries are trackable</strong> - Monitor performance and costs with <code>result.MemoryQueries</code></p></li><li><p><strong>Configuration is flexible</strong> - Tune weights, limits, and providers for your use case</p></li><li><p><strong>Production-ready options exist</strong> - Scale from in-memory prototypes to PostgreSQL/Weaviate production deployments</p></li></ol><h2 class="relative group">Next Steps<div id=next-steps class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#next-steps aria-label=Anchor>#</a></span></h2><ul><li>Explore the <a href=https://docs.agenticgokit.com/reference/api/vnext/memory target=_blank>Memory API documentation</a></li><li>Try the <a href=https://github.com/AgenticGoKit/AgenticGoKit/tree/master/examples/vnext/conversation-memory-stream-demo target=_blank>streaming examples</a></li><li>Check out <a href=https://docs.agenticgokit.com/reference/api/vnext/workflow target=_blank>workflow memory patterns</a></li></ul><h2 class="relative group">Resources<div id=resources class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#resources aria-label=Anchor>#</a></span></h2><ul><li><strong>AgenticGoKit Repository</strong>: <a href=https://github.com/AgenticGoKit/AgenticGoKit target=_blank>github.com/kunalkushwaha/agenticgokit</a></li><li><strong>Documentation</strong>: <a href=https://docs.agenticgokit.com/reference/api/vnext/README target=_blank>docs/reference/api/vnext/</a></li><li><strong>Memory Examples</strong>: <a href=https://github.com/AgenticGoKit/AgenticGoKit/tree/master/examples/vnext/conversation-memory-demo target=_blank>examples/vnext/conversation-memory-demo/</a></li></ul><hr><p><em>Built with AgenticGoKit v0.4.5 - The Go framework for production-ready AI agents</em></p><hr><h3 class="relative group">Contribute to AgenticGoKit<div id=contribute-to-agenticgokit class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#contribute-to-agenticgokit aria-label=Anchor>#</a></span></h3><p><em>Open-source Agentic AI framework in Go for building, orchestrating, and deploying intelligent agents. LLM-agnostic, event-driven, with multi-agent workflows, MCP tool discovery, and production-grade observability.</em></p><p>AgenticGoKit is an open-source project that welcomes contributions! Whether you&rsquo;re interested in:</p><ul><li>Adding new LLM providers or memory backends</li><li>Improving documentation and examples</li><li>Implementing new agent patterns or workflows</li><li>Fixing bugs or adding features</li><li>Writing tests and improving code quality</li></ul><p>We&rsquo;d love to have you join our community. Check out our <a href=docs/contributors/>contributing guide</a> and <a href=https://github.com/AgenticGoKit/AgenticGoKit target=_blank>GitHub repository</a> to get started.</p></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://kunalkushwaha.github.io/post/context-aware-ai-agents-with-memory/&amp;title=Building%20Context-Aware%20AI%20Agents%20with%20Memory%20in%20AgenticGoKit" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://twitter.com/intent/tweet/?url=https://kunalkushwaha.github.io/post/context-aware-ai-agents-with-memory/&amp;text=Building%20Context-Aware%20AI%20Agents%20with%20Memory%20in%20AgenticGoKit" title="Tweet on Twitter" aria-label="Tweet on Twitter"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg></span>
</a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://kunalkushwaha.github.io/post/context-aware-ai-agents-with-memory/&amp;resubmit=true&amp;title=Building%20Context-Aware%20AI%20Agents%20with%20Memory%20in%20AgenticGoKit" title="Submit to Reddit" aria-label="Submit to Reddit"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.facebook.com/sharer/sharer.php?u=https://kunalkushwaha.github.io/post/context-aware-ai-agents-with-memory/&amp;quote=Building%20Context-Aware%20AI%20Agents%20with%20Memory%20in%20AgenticGoKit" title="Share on Facebook" aria-label="Share on Facebook"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://kunalkushwaha.github.io/post/context-aware-ai-agents-with-memory/&amp;subject=Building%20Context-Aware%20AI%20Agents%20with%20Memory%20in%20AgenticGoKit" title="Send via email" aria-label="Send via email"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a></section></div><script type=text/javascript src=https://kunalkushwaha.github.io/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA==" data-oid="views_post\Context-Aware AI Agents with Memory.md" data-oid-likes="likes_post\Context-Aware AI Agents with Memory.md"></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span class="flex flex-col"><a class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=https://kunalkushwaha.github.io/post/streaming-agenticgokit/><span class=leading-6><span class="inline-block rtl:rotate-180">&larr;</span>&ensp;Streaming AI Responses in Go with AgenticGoKit
</span></a><span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2025-10-26T00:00:00+00:00>26 October 2025</time>
</span></span><span class="flex flex-col items-end"><a class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=https://kunalkushwaha.github.io/post/mcp-tools-with-agenticgokit/><span class=leading-6>Building AI Agents That Actually Do Things: Tools and MCP Made Simple in Go&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
</span></a><span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2025-11-06T00:00:00+00:00>6 November 2025</time></span></span></div></div></footer></article><div id=scroll-to-top class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200"><a href=#the-top class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex list-none flex-col sm:flex-row"><li class="flex mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=https://kunalkushwaha.github.io/post/ title=Posts>Blog</a></li><li class="flex mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=https://kunalkushwaha.github.io/about/ title="About Me">About</a></li></ul></nav><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">Kunal Kushwaha</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=https://kunalkushwaha.github.io/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500" data-url=https://kunalkushwaha.github.io/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>